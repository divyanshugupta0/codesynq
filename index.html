<!DOCTYPE html>
<html>
<head>
    <title>Fire-Nexus</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css" rel="stylesheet">
    <link rel ="stylesheet" href="style.css">
</head>
<body>
    <header class="site-header">
        <h1 class="site-title">Fire-Nexus</h1>
    </header>
    <!-- Profile Setup Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <h2>Profile Setup</h2>
            <p>Please set up your profile to continue</p>
            <input type="text" id="username" placeholder="Your name" style="width: 100%; margin: 10px 0;">
            <input type="file" id="profilePic" accept="image/*">
            <button onclick="saveProfile()">Save Profile</button>
        </div>
    </div>

    <!-- Connection Request Modal -->
    <div id="connectionModal" class="modal">
        <div class="modal-content">
            <h2>Connection Request</h2>
            <p id="connectionRequest"></p>
            <button onclick="acceptConnection()">Accept</button>
            <button onclick="rejectConnection()">Reject</button>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div id="profileEditModal" class="modal">
        <div class="modal-content">
            <h2>Edit Profile</h2>
            <input type="text" id="editUsername" placeholder="Your name" style="width: 100%; margin: 10px 0;">
            <input type="file" id="editProfilePic" accept="image/*">
            <button onclick="updateProfile()">Update Profile</button>
        </div>
    </div>

    <div class="container">
        <div class="editor-section">
            <div class="profile-header">
                <!-- Add link input container below profile header -->
                <div class="link-input-container">
                    <button onclick="shareRoom()">Share Room Link</button>
                    <span id="roomInfo" class="room-info"></span>
                </div>
                <img id="userProfilePic" class="profile-pic" onclick="openProfileEdit()">
            </div>
            <div class="editor-mode-banner" id="editorModeBanner">
                <span class="mode-indicator"></span>
                <select id="editingMode" class="mode-select" onchange="switchMode(this.value)">
                    <option value="restricted">Restricted Mode</option>
                    <option value="freestyle">Freestyle Mode</option>
                </select>
            </div>
            <div class="editor-container" id="editor"></div>
        </div>
        

        <div class="right-panel">
            <div class="video-section">
                <div class="connected-users">
                    <h3>Connected Users</h3>
                    <div id="userList"></div>
                </div>
                <div class="video-grid" id="videoGrid"></div>
                <div class="controls">
                    <button onclick="toggleVideo()">Toggle Video</button>
                    <button onclick="toggleAudio()">Toggle Audio</button>
                    <button onclick="flipCamera()">Flip Camera</button>
                </div>
            </div>
            

            <div class="chat-section">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Type a message..." style="flex: 1">
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src = "script.js"><script>
    </body>
    </html>
